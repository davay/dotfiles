# Please see http://i3wm.org/docs/userguide.html for a complete reference!

# Mod key (Mod1=<Alt>, Mod4=<Super>)
set $mod Mod4

# i3 settings
default_border pixel 1
default_floating_border normal
font xft:URWGothic-Book 11 
floating_modifier $mod
workspace_auto_back_and_forth no
 
# i3-gaps settings
smart_borders on
gaps inner 14
gaps outer -2
gaps top 35

# utilities
bindsym --release $mod+ctrl+x exec xkill
bindsym $mod+Shift+x kill 
bindsym $mod+Return exec kitty
bindsym $mod+d exec --no-startup-id dmenu_recency
bindsym Print exec --no-startup-id i3-scrot
bindsym $mod+Print --release exec --no-startup-id i3-scrot -w
bindsym $mod+Shift+Print --release exec --no-startup-id i3-scrot -s
bindsym $mod+grave reload
bindsym $mod+Shift+grave restart

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split orientation
bindsym $mod+z split toggle

# toggle fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+c layout toggle split
bindsym $mod+Shift+c layout stacking
bindsym $mod+Ctrl+c layout tabbed

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show

# get window info
bindsym --release $mod+F1 exec --no-startup-id notify-send "$(xprop | grep -v \"NET_WM_NAME\" | grep \"WM_NAME\|WM_CLASS\")"

# workspace names (also works with unicode)
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 Q
set $ws6 W
set $ws7 E
set $ws8 R

# assign workspace to monitors
workspace 1 output primary
workspace 2 output primary
workspace 3 output primary
workspace 4 output primary
workspace Q output DP-5
workspace W output DP-5
workspace E output DP-5
workspace R output DP-5

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+q workspace $ws5
bindsym $mod+w workspace $ws6
bindsym $mod+e workspace $ws7
bindsym $mod+r workspace $ws8

# Move focused container to workspace
bindsym $mod+Ctrl+1 move container to workspace $ws1
bindsym $mod+Ctrl+2 move container to workspace $ws2
bindsym $mod+Ctrl+3 move container to workspace $ws3
bindsym $mod+Ctrl+4 move container to workspace $ws4
bindsym $mod+Ctrl+q move container to workspace $ws5
bindsym $mod+Ctrl+w move container to workspace $ws6
bindsym $mod+Ctrl+e move container to workspace $ws7
bindsym $mod+Ctrl+r move container to workspace $ws8

# Move to workspace with focused container
bindsym $mod+Shift+1 move container to workspace $ws1; workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2; workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3; workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4; workspace $ws4
bindsym $mod+Shift+q move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+w move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+e move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+r move container to workspace $ws8; workspace $ws8

# Lock screen
bindsym $mod+9 exec --no-startup-id blurlock

# open apps on specific workspaces
assign [class="(?i)steam"] $ws3
assign [class="(?i)franz"] $ws4
for_window [class="(?i)spotify"] move to workspace $ws5
assign [class="(?i)pavucontrol"] $ws5
assign [class="(?i)discord"] $ws6

assign [class="(?i)dota2"] $ws2
assign [class="(?i)fsd-win64-shipping.exe"] $ws2
assign [class="(?i)7daystodie.exe"] $ws2 
assign [class="(?i)tekkengame-win64-shipping.exe"] $ws2

# Autostart

## Init
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id nitrogen --restore; sleep 1; picom -bc
exec --no-startup-id xfce4-power-manager
exec --no-startup-id xautolock -time 10 -locker blurlock
exec --no-startup-id nvidia-settings -a "[gpu:0]/GpuPowerMizerMode=1"
exec_always --no-startup-id fix_xcursor
exec_always --no-startup-id xrandr --output DP-5 --auto --right-of HDMI-0 --rotate left --output HDMI-0 --primary --mode 2560x1080 --rate 74.99; xrandr --output HDMI-0 --pos 0x525
exec --no-startup-id ~/.config/polybar/launch.sh
exec --no-startup-id ~/.config/polybar/spotify_scripts/launch_listener.sh
exec_always --no-startup-id setxkbmap -layout us -option caps:escape,altwin:swap_lalt_lwin

## Tray
exec --no-startup-id blueman-applet
exec --no-startup-id nm-applet
exec --no-startup-id pa-applet
exec --no-startup-id pamac-tray
exec --no-startup-id clipit

## Apps
exec --no-startup-id steam
exec --no-startup-id spotify
exec --no-startup-id pavucontrol
exec --no-startup-id discord

# Set shut down, restart and locking features
bindsym $mod+0 mode "$mode_system"
set $mode_system (l)ock, (e)xit, switch_(u)ser, (s)uspend, (h)ibernate, (r)eboot, (Shift+s)hutdown
mode "$mode_system" {
    bindsym l exec --no-startup-id i3exit lock, mode "default"
    bindsym s exec --no-startup-id i3exit suspend, mode "default"
    bindsym u exec --no-startup-id i3exit switch_user, mode "default"
    bindsym e exec --no-startup-id i3exit logout, mode "default"
    bindsym h exec --no-startup-id i3exit hibernate, mode "default"
    bindsym r exec --no-startup-id i3exit reboot, mode "default"
    bindsym Shift+s exec --no-startup-id i3exit shutdown, mode "default"

    # exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
